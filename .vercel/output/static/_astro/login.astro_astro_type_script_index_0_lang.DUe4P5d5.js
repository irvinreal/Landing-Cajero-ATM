import{n as r}from"./router.hIIS2Ntx.js";function l(e){console.log("start"),setInterval(()=>{console.log("time")},1e3),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("expiryDate"),localStorage.removeItem("userId"),console.log("Session expired.")},e)}function s(e,o){const t=new Date(new Date().getTime()+3e5);return console.log(localStorage.getItem("token")),console.log(localStorage.getItem("userId")),localStorage.getItem("token")||localStorage.setItem("token",e),localStorage.getItem("userId")||localStorage.setItem("userId",o),localStorage.getItem("expiryDate")||localStorage.setItem("expiryDate",t.toISOString()),l(3e5)}const i=document.getElementById("client-form");i?.addEventListener("submit",async e=>{e.preventDefault();const o=new FormData(e.target),n=Object.fromEntries(o.entries());try{const t=await fetch("http://localhost:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await t.json();t.ok&&(console.log(a),s(a.token,a.userId),r("/my-account"))}catch(t){console.log(t)}});
